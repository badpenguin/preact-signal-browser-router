!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).Router={})}(this,(function(t){"use strict";var i,n,o,r;function e(t,r,e){var f,_,u,s={};for(u in r)"key"==u?f=r[u]:"ref"==u?_=r[u]:s[u]=r[u];if(arguments.length>2&&(s.children=arguments.length>3?i.call(arguments,2):e),"function"==typeof t&&null!=t.defaultProps)for(u in t.defaultProps)void 0===s[u]&&(s[u]=t.defaultProps[u]);return function(t,i,r,e,f){var _={type:t,props:i,key:r,ref:e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==f?++o:f,__i:-1,__u:0};return null==f&&null!=n.vnode&&n.vnode(_),_}(t,s,f,_,null)}i=[].slice,n={__e:function(t,i,n,o){for(var r,e,f;i=i.__;)if((r=i.__c)&&!r.__)try{if((e=r.constructor)&&null!=e.getDerivedStateFromError&&(r.setState(e.getDerivedStateFromError(t)),f=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),f=r.__d),f)return r.__E=r}catch(i){t=i}throw t}},o=0,r=function(t){return null!=t&&null==t.constructor},"function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;var f,_,u,s,c=0,v=[],a=[],h=n,d=h.__b,l=h.__r,p=h.diffed,y=h.__c,m=h.unmount,g=h.__;function b(t,i){var n=function(t,i){h.__h&&h.__h(_,t,c||i),c=0;var n=_.__H||(_.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:a}),n.__[t]}(f++,7);return function(t,i){return!t||t.length!==i.length||i.some((function(i,n){return i!==t[n]}))}(n.__H,i)?(n.__V=t(),n.i=i,n.__h=t,n.__V):n.__}function w(){for(var t;t=v.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(x),t.__H.__h.forEach(H),t.__H.__h=[]}catch(i){t.__H.__h=[],h.__e(i,t.__v)}}h.__b=function(t){_=null,d&&d(t)},h.__=function(t,i){t&&i.__k&&i.__k.__m&&(t.__m=i.__k.__m),g&&g(t,i)},h.__r=function(t){l&&l(t),f=0;var i=(_=t.__c).__H;i&&(u===_?(i.__h=[],_.__h=[],i.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=a,t.__N=t.i=void 0}))):(i.__h.forEach(x),i.__h.forEach(H),i.__h=[],f=0)),u=_},h.diffed=function(t){p&&p(t);var i=t.__c;i&&i.__H&&(i.__H.__h.length&&(1!==v.push(i)&&s===h.requestAnimationFrame||((s=h.requestAnimationFrame)||E)(w)),i.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==a&&(t.__=t.__V),t.i=void 0,t.__V=a}))),u=_=null},h.__c=function(t,i){i.some((function(t){try{t.__h.forEach(x),t.__h=t.__h.filter((function(t){return!t.__||H(t)}))}catch(n){i.some((function(t){t.__h&&(t.__h=[])})),i=[],h.__e(n,t.__v)}})),y&&y(t,i)},h.unmount=function(t){m&&m(t);var i,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{x(t)}catch(t){i=t}})),n.__H=void 0,i&&h.__e(i,n.__v))};var S="function"==typeof requestAnimationFrame;function E(t){var i,n=function(){clearTimeout(o),S&&cancelAnimationFrame(i),setTimeout(t)},o=setTimeout(n,100);S&&(i=requestAnimationFrame(n))}function x(t){var i=_,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),_=i}function H(t){var i=_;t.__c=t.__(),_=i}var k,N,$=Symbol.for("preact-signals");function P(){if(A>1)A--;else{for(var t,i=!1;void 0!==N;){var n=N;for(N=void 0,V++;void 0!==n;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&D(n))try{n.c()}catch(n){i||(t=n,i=!0)}n=o}}if(V=0,A--,i)throw t}}var U,A=0,V=0,F=0;function O(t){if(void 0!==k){var i=t.n;return void 0===i||i.t!==k?(i={i:0,S:t,p:k.s,n:void 0,t:k,e:void 0,x:void 0,r:i},void 0!==k.s&&(k.s.n=i),k.s=i,t.n=i,32&k.f&&t.S(i),i):-1===i.i?(i.i=0,void 0!==i.n&&(i.n.p=i.p,void 0!==i.p&&(i.p.n=i.n),i.p=k.s,i.n=void 0,k.s.n=i,k.s=i),i):void 0}}function T(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}function C(t){return new T(t)}function D(t){for(var i=t.s;void 0!==i;i=i.n)if(i.S.i!==i.i||!i.S.h()||i.S.i!==i.i)return!0;return!1}function R(t){for(var i=t.s;void 0!==i;i=i.n){var n=i.S.n;if(void 0!==n&&(i.r=n),i.S.n=i,i.i=-1,void 0===i.n){t.s=i;break}}}function j(t){for(var i,n=t.s;void 0!==n;){var o=n.p;-1===n.i?(n.S.U(n),void 0!==o&&(o.n=n.n),void 0!==n.n&&(n.n.p=o)):i=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=o}t.s=i}function q(t){T.call(this,void 0),this.x=t,this.s=void 0,this.g=F-1,this.f=4}function L(t){var i=t.u;if(t.u=void 0,"function"==typeof i){A++;var n=k;k=void 0;try{i()}catch(i){throw t.f&=-2,t.f|=8,G(t),i}finally{k=n,P()}}}function G(t){for(var i=t.s;void 0!==i;i=i.n)i.S.U(i);t.x=void 0,t.s=void 0,L(t)}function J(t){if(k!==this)throw new Error("Out-of-order effect");j(this),k=t,this.f&=-2,8&this.f&&G(this),P()}function W(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function z(t){var i=new W(t);try{i.c()}catch(t){throw i.d(),t}return i.d.bind(i)}function B(t,i){n[t]=i.bind(null,n[t]||function(){})}function I(t){U&&U(),U=t&&t.S()}function K(t){var i=this,n=t.data,o=function(t){return b((function(){return C(t)}),[])}(n);o.value=n;var e=b((function(){for(var t=i.__v;t=t.__;)if(t.__c){t.__c.__$f|=4;break}return i.__$u.c=function(){var t;r(e.peek())||3!==(null==(t=i.base)?void 0:t.nodeType)?(i.__$f|=1,i.setState({})):i.base.data=e.peek()},function(t){return new q(t)}((function(){var t=o.value.value;return 0===t?0:!0===t?"":t||""}))}),[]);return e.value}function M(t,i,n,o){var r=i in t&&void 0===t.ownerSVGElement,e=C(n);return{o:function(t,i){e.value=t,o=i},d:z((function(){var n=e.value.value;o[i]!==n&&(o[i]=n,r?t[i]=n:n?t.setAttribute(i,n):t.removeAttribute(i))}))}}T.prototype.brand=$,T.prototype.h=function(){return!0},T.prototype.S=function(t){this.t!==t&&void 0===t.e&&(t.x=this.t,void 0!==this.t&&(this.t.e=t),this.t=t)},T.prototype.U=function(t){if(void 0!==this.t){var i=t.e,n=t.x;void 0!==i&&(i.x=n,t.e=void 0),void 0!==n&&(n.e=i,t.x=void 0),t===this.t&&(this.t=n)}},T.prototype.subscribe=function(t){var i=this;return z((function(){var n=i.value,o=k;k=void 0;try{t(n)}finally{k=o}}))},T.prototype.valueOf=function(){return this.value},T.prototype.toString=function(){return this.value+""},T.prototype.toJSON=function(){return this.value},T.prototype.peek=function(){var t=k;k=void 0;try{return this.value}finally{k=t}},Object.defineProperty(T.prototype,"value",{get:function(){var t=O(this);return void 0!==t&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(V>100)throw new Error("Cycle detected");this.v=t,this.i++,F++,A++;try{for(var i=this.t;void 0!==i;i=i.x)i.t.N()}finally{P()}}}}),(q.prototype=new T).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===F)return!0;if(this.g=F,this.f|=1,this.i>0&&!D(this))return this.f&=-2,!0;var t=k;try{R(this),k=this;var i=this.x();(16&this.f||this.v!==i||0===this.i)&&(this.v=i,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return k=t,j(this),this.f&=-2,!0},q.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var i=this.s;void 0!==i;i=i.n)i.S.S(i)}T.prototype.S.call(this,t)},q.prototype.U=function(t){if(void 0!==this.t&&(T.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var i=this.s;void 0!==i;i=i.n)i.S.U(i)}},q.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;void 0!==t;t=t.x)t.t.N()}},Object.defineProperty(q.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=O(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}}),W.prototype.c=function(){var t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var i=this.x();"function"==typeof i&&(this.u=i)}finally{t()}},W.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,L(this),R(this),A++;var t=k;return k=this,J.bind(this,t)},W.prototype.N=function(){2&this.f||(this.f|=2,this.o=N,N=this)},W.prototype.d=function(){this.f|=8,1&this.f||G(this)},K.displayName="_st",Object.defineProperties(T.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:K},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),B("__b",(function(t,i){if("string"==typeof i.type){var n,o=i.props;for(var r in o)if("children"!==r){var e=o[r];e instanceof T&&(n||(i.__np=n={}),n[r]=e,o[r]=e.peek())}}t(i)})),B("__r",(function(t,i){I();var n,o=i.__c;o&&(o.__$f&=-2,void 0===(n=o.__$u)&&(o.__$u=n=function(t){var i;return z((function(){i=this})),i.c=function(){o.__$f|=1,o.setState({})},i}())),I(n),t(i)})),B("__e",(function(t,i,n,o){I(),t(i,n,o)})),B("diffed",(function(t,i){var n;if(I(),"string"==typeof i.type&&(n=i.__e)){var o=i.__np,r=i.props;if(o){var e=n.U;if(e)for(var f in e){var _=e[f];void 0===_||f in o||(_.d(),e[f]=void 0)}else e={},n.U=e;for(var u in o){var s=e[u],c=o[u];void 0===s?(s=M(n,u,c,r),e[u]=s):s.o(c,r)}}}t(i)})),B("unmount",(function(t,i){if("string"==typeof i.type){var n=i.__e;if(n){var o=n.U;if(o)for(var r in n.U=void 0,o){var e=o[r];e&&e.d()}}}else{var f=i.__c;if(f){var _=f.__$u;_&&(f.__$u=void 0,_.d())}}t(i)})),B("__h",(function(t,i,n,o){(o<3||9===o)&&(i.__$f|=2),t(i,n,o)}));var Q=function(){var t=window.location.pathname,i=window.location.hash.slice(1);return t+(i?"#"+i:"")},X=C(Q()),Y=function(){X.value=Q()},Z=function(t){console.debug("! route:",t),window.history.pushState(null,null,t),Y()};window.addEventListener("hashchange",Y),window.addEventListener("load",Y),window.addEventListener("popstate",Y),document.addEventListener("click",(function(t){var i=t.target.closest("a");if(i&&i.matches('a[href^="/"]')){t.preventDefault();var n=i.getAttribute("href");Z(n)}})),t.Route=function(t){return e(t.component,{})},t.Router=function(t){var i=t.children,n=t.fallback,o=void 0===n?null:n,r=t.prefix,f=void 0===r?"":r,_=i.find((function(t){return function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n&&t.startsWith(n)&&(t=t.slice(n.length)),new RegExp("^".concat(i.replace(/\*/g,".*"),"$")).test(t)}(X.value,t.props.path,f)}));return console.debug("* Router:",_?"[path: "+_.props.path+"]":"(NONE)"),_||(o?e(o):null)},t.route=Z}));
//# sourceMappingURL=router.umd.js.map
